{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/service/books.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/material/toolbar\";\n\nfunction AuthorComponent_tr_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const author_r1 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(author_r1);\n  }\n}\n\nexport class AuthorComponent {\n  constructor(bookService) {\n    this.bookService = bookService;\n    this.books = [];\n    this.authors = [];\n    this.isBooks = false;\n  }\n\n  getBooks() {\n    console.log(\"Get Books\");\n    this.bookSubscription = this.bookService.booksSubject.subscribe(res => {\n      this.bookService.getBooks().subscribe({\n        next: result => {\n          this.books = result;\n          this.checkIsBook();\n        },\n        error: error => {}\n      });\n    });\n  }\n\n  ngOnInit() {\n    this.getBooks();\n    setTimeout(() => {\n      console.log(\"Inside settimeout\");\n      let authorsArray = this.books.map(mapVal => mapVal.author);\n      authorsArray.forEach(authArray => {\n        authArray.forEach(auth => {\n          console.log(\"Author len: \" + auth);\n          this.authors.push(auth);\n        });\n        this.authors = Array.from(new Set(this.authors));\n        console.log(\"Auth : \" + this.authors.length);\n      });\n      this.checkIsBook();\n    }, 5000);\n  }\n\n  checkIsBook() {\n    console.log(this.authors.length);\n\n    if (this.books.length > 0 && this.books[0].title) {\n      this.isBooks = true;\n    } else {\n      this.isBooks = false;\n    }\n  }\n\n}\n\nAuthorComponent.ɵfac = function AuthorComponent_Factory(t) {\n  return new (t || AuthorComponent)(i0.ɵɵdirectiveInject(i1.BooksService));\n};\n\nAuthorComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AuthorComponent,\n  selectors: [[\"app-author\"]],\n  decls: 11,\n  vars: 3,\n  consts: [[4, \"ngFor\", \"ngForOf\"]],\n  template: function AuthorComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"p\")(1, \"mat-toolbar\")(2, \"span\");\n      i0.ɵɵtext(3, \"Authors\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(4, \"table\")(5, \"tr\")(6, \"th\")(7, \"h3\");\n      i0.ɵɵtext(8, \"Author Name\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵtemplate(9, AuthorComponent_tr_9_Template, 3, 1, \"tr\", 0);\n      i0.ɵɵpipe(10, \"async\");\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(10, 1, ctx.authors));\n    }\n  },\n  dependencies: [i2.NgForOf, i3.MatToolbar, i2.AsyncPipe],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhdXRob3IuY29tcG9uZW50LmNzcyJ9 */\"]\n});","map":{"version":3,"mappings":";;;;;;;IAUIA,2BAA2C,CAA3C,EAA2C,IAA3C;IACQA;IAAUA;;;;;IAAVA;IAAAA;;;;ACAZ,OAAM,MAAOC,eAAP,CAAsB;EAQ1BC,YAAoBC,WAApB,EAA4C;IAAxB;IALpB,aAAmB,EAAnB;IACA,eAAkB,EAAlB;IACA,eAAmB,KAAnB;EAGgD;;EAEhDC,QAAQ;IACNC,OAAO,CAACC,GAAR,CAAY,WAAZ;IACA,KAAKC,gBAAL,GAAwB,KAAKJ,WAAL,CAAiBK,YAAjB,CAA8BC,SAA9B,CAAyCC,GAAG,IAAG;MACrE,KAAKP,WAAL,CAAiBC,QAAjB,GAA4BK,SAA5B,CAAsC;QACpCE,IAAI,EAAKC,MAAF,IAAa;UAClB,KAAKC,KAAL,GAAaD,MAAb;UACA,KAAKE,WAAL;QACD,CAJmC;QAKpCC,KAAK,EAAGA,KAAD,IAAU,CAAG;MALgB,CAAtC;IAOD,CARuB,CAAxB;EASD;;EAEDC,QAAQ;IACN,KAAKZ,QAAL;IACAa,UAAU,CAAC,MAAK;MACdZ,OAAO,CAACC,GAAR,CAAY,mBAAZ;MACA,IAAIY,YAAY,GAAG,KAAKL,KAAL,CAAWM,GAAX,CAAeC,MAAM,IAAGA,MAAM,CAACC,MAA/B,CAAnB;MACAH,YAAY,CAACI,OAAb,CAAqBC,SAAS,IAAE;QAC9BA,SAAS,CAACD,OAAV,CAAkBE,IAAI,IAAG;UACvBnB,OAAO,CAACC,GAAR,CAAY,iBAAekB,IAA3B;UACA,KAAKC,OAAL,CAAaC,IAAb,CAAkBF,IAAlB;QACD,CAHD;QAIA,KAAKC,OAAL,GAAeE,KAAK,CAACC,IAAN,CAAW,IAAIC,GAAJ,CAAQ,KAAKJ,OAAb,CAAX,CAAf;QACApB,OAAO,CAACC,GAAR,CAAY,YAAU,KAAKmB,OAAL,CAAaK,MAAnC;MACD,CAPD;MAQA,KAAKhB,WAAL;IACD,CAZS,EAYP,IAZO,CAAV;EAaD;;EAEDA,WAAW;IACTT,OAAO,CAACC,GAAR,CAAY,KAAKmB,OAAL,CAAaK,MAAzB;;IACA,IAAG,KAAKjB,KAAL,CAAWiB,MAAX,GAAkB,CAAlB,IAAuB,KAAKjB,KAAL,CAAW,CAAX,EAAckB,KAAxC,EAA8C;MAC5C,KAAKC,OAAL,GAAe,IAAf;IACD,CAFD,MAEO;MACL,KAAKA,OAAL,GAAe,KAAf;IACD;EACF;;AA/CyB;;;mBAAf/B,iBAAeD;AAAA;;;QAAfC;EAAegC;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MDX5BrC,0BAAG,CAAH,EAAG,aAAH,EAAG,CAAH,EAAG,MAAH;MAGUA;MAAOA;MAKjBA,8BAAO,CAAP,EAAO,IAAP,EAAO,CAAP,EAAO,IAAP,EAAO,CAAP,EAAO,IAAP;MACgBA;MAAWA;MACvBA;;MAGJA;;;;MAH2BA;MAAAA","names":["i0","AuthorComponent","constructor","bookService","getBooks","console","log","bookSubscription","booksSubject","subscribe","res","next","result","books","checkIsBook","error","ngOnInit","setTimeout","authorsArray","map","mapVal","author","forEach","authArray","auth","authors","push","Array","from","Set","length","title","isBooks","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\AstikaMishra\\Downloads\\javafsd\\angularassignment\\bookapp\\src\\app\\component\\author\\author.component.html","C:\\Users\\AstikaMishra\\Downloads\\javafsd\\angularassignment\\bookapp\\src\\app\\component\\author\\author.component.ts"],"sourcesContent":["<p>\n    <!-- #docregion toolbar-simple -->\n    <mat-toolbar>\n    <span>Authors</span>\n    </mat-toolbar>\n    <!-- #enddocregion toolbar-simple -->\n</p>\n\n<table>\n    <tr><th><h3>Author Name</h3></th></tr>\n    <tr *ngFor=\"let author of authors | async\">\n        <td>{{author}}</td>\n    </tr>\n</table>","import { Component, OnInit } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { Book } from 'src/app/model/Book';\nimport { AuthorService } from 'src/app/service/author.service';\nimport { BooksService } from 'src/app/service/books.service';\n\n@Component({\n  selector: 'app-author',\n  templateUrl: './author.component.html',\n  styleUrls: ['./author.component.css']\n})\nexport class AuthorComponent implements OnInit {\n\n  searchString: string;\n  books: Array<Book>=[];\n  authors: string[]=[];\n  isBooks: boolean = false;\n  private bookSubscription : Subscription\n\n  constructor(private bookService:BooksService){ }\n\n  getBooks(){\n    console.log(\"Get Books\");\n    this.bookSubscription = this.bookService.booksSubject.subscribe( res => {\n      this.bookService.getBooks().subscribe({\n        next : ( result ) => {\n          this.books = result;\n          this.checkIsBook();\n        },\n        error: (error) => {}\n      });\n    });\n  }  \n\n  ngOnInit(): void {\n    this.getBooks();\n    setTimeout(() => {\n      console.log(\"Inside settimeout\");\n      let authorsArray = this.books.map(mapVal=> mapVal.author);\n      authorsArray.forEach(authArray=>{\n        authArray.forEach(auth => {\n          console.log(\"Author len: \"+auth);\n          this.authors.push(auth);\n        });\n        this.authors = Array.from(new Set(this.authors));\n        console.log(\"Auth : \"+this.authors.length);\n      });\n      this.checkIsBook();\n    }, 5000);\n  }\n\n  checkIsBook(){\n    console.log(this.authors.length);\n    if(this.books.length>0 && this.books[0].title){\n      this.isBooks = true;\n    } else {\n      this.isBooks = false;\n    }\n  }\n\n}\n"]},"metadata":{},"sourceType":"module"}